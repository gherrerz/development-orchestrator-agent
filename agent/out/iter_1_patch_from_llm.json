{
  "notes": [
    "Implementada la lógica de la calculadora de créditos en Django y se han agregado pruebas unitarias correspondientes."
  ],
  "files": {
    "./app/views.py": {
      "operation": "modify",
      "content": "from django.shortcuts import render\nfrom .forms import CreditCalculatorForm\n\n\ndef credit_calculator(request):\n    if request.method == 'POST':\n        form = CreditCalculatorForm(request.POST)\n        if form.is_valid():\n            amount = form.cleaned_data['amount']\n            interest_rate = form.cleaned_data['interest_rate']\n            years = form.cleaned_data['years']\n            total_payment = amount * (1 + interest_rate / 100) ** years\n            return render(request, 'calculator.html', {'form': form, 'total_payment': total_payment})\n    else:\n        form = CreditCalculatorForm()\n    return render(request, 'calculator.html', {'form': form})"
    },
    "./app/forms.py": {
      "operation": "modify",
      "content": "from django import forms\n\n\nclass CreditCalculatorForm(forms.Form):\n    amount = forms.DecimalField(label='Monto del crédito', max_digits=10, decimal_places=2)\n    interest_rate = forms.DecimalField(label='Tasa de interés (%)', max_digits=5, decimal_places=2)\n    years = forms.IntegerField(label='Años')"
    },
    "./app/templates/calculator.html": {
      "operation": "modify",
      "content": "<!DOCTYPE html>\n<html lang=\"es\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Calculadora de Créditos</title>\n</head>\n<body>\n    <h1>Calculadora de Créditos</h1>\n    <form method=\"post\">\n        {% csrf_token %}\n        {{ form.as_p }}\n        <button type=\"submit\">Calcular</button>\n    </form>\n    {% if total_payment %}\n        <h2>Total a Pagar: {{ total_payment }}</h2>\n    {% endif %}\n</body>\n</html>"
    },
    "./app/tests/test_calculator.py": {
      "operation": "modify",
      "content": "import pytest\nfrom django.urls import reverse\n\n\n@pytest.mark.django_db\ndef test_credit_calculator(client):\n    response = client.post(reverse('credit_calculator'), {\n        'amount': 10000,\n        'interest_rate': 5,\n        'years': 2\n    })\n    assert response.status_code == 200\n    assert b'Total a Pagar:' in response.content\n"
    }
  }
}
