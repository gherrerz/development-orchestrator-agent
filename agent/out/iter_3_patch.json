{
  "notes": [
    "Se implementa la lógica de la calculadora de créditos en Django, incluyendo la vista, el formulario y la plantilla HTML. También se agregan pruebas unitarias para asegurar la funcionalidad."
  ],
  "files": {
    "./app/views.py": {
      "operation": "modify",
      "content": "from django.shortcuts import render\nfrom .forms import CreditCalculatorForm\n\n\ndef credit_calculator(request):\n    if request.method == 'POST':\n        form = CreditCalculatorForm(request.POST)\n        if form.is_valid():\n            amount = form.cleaned_data['amount']\n            interest_rate = form.cleaned_data['interest_rate']\n            years = form.cleaned_data['years']\n            total_payment = amount * (1 + interest_rate / 100) ** years\n            return render(request, 'calculator.html', {'form': form, 'total_payment': total_payment})\n    else:\n        form = CreditCalculatorForm()\n    return render(request, 'calculator.html', {'form': form})"
    },
    "./app/forms.py": {
      "operation": "modify",
      "content": "from django import forms\n\n\nclass CreditCalculatorForm(forms.Form):\n    amount = forms.FloatField(label='Monto del crédito', min_value=0)\n    interest_rate = forms.FloatField(label='Tasa de interés (%)', min_value=0)\n    years = forms.IntegerField(label='Años', min_value=1)"
    },
    "./app/templates/calculator.html": {
      "operation": "modify",
      "content": "<!DOCTYPE html>\n<html lang=\"es\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Calculadora de Créditos</title>\n</head>\n<body>\n    <h1>Calculadora de Créditos</h1>\n    <form method=\"post\">\n        {% csrf_token %}\n        {{ form.as_p }}\n        <button type=\"submit\">Calcular</button>\n    </form>\n    {% if total_payment %}\n        <h2>Total a Pagar: {{ total_payment }}</h2>\n    {% endif %}\n</body>\n</html>"
    },
    "./app/tests/test_calculator.py": {
      "operation": "modify",
      "content": "from django.test import TestCase\nfrom .forms import CreditCalculatorForm\n\n\nclass CreditCalculatorFormTest(TestCase):\n    def test_valid_form(self):\n        form = CreditCalculatorForm(data={'amount': 1000, 'interest_rate': 5, 'years': 2})\n        self.assertTrue(form.is_valid())\n\n    def test_invalid_form(self):\n        form = CreditCalculatorForm(data={'amount': -1000, 'interest_rate': 5, 'years': 2})\n        self.assertFalse(form.is_valid())\n\n    def test_calculation(self):\n        amount = 1000\n        interest_rate = 5\n        years = 2\n        total_payment = amount * (1 + interest_rate / 100) ** years  # 1102.5\n        self.assertAlmostEqual(total_payment, 1102.5, places=2)"
    }
  }
}
